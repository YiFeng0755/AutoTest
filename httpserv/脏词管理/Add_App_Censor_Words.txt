*** Settings ***
Documentation     body为json格式，各个字段解释如下：
...
...               " Words" \ 敏感词列表，包括以下属性：
...
...               "Word" \ \ \ \ \ \ \ \ \ \ \ \ 敏感词，字符串
...
...               "Category" \ \ \ \ \ \ \ \ \ \ \ \ 词分类，即词库分类唯一编号，无符号整型，可以通过查看词库分类列表接口获取
...
...               "Level" \ \ \ \ \ \ \ \ \ \ \ \ 敏感词等级，无符号整型，一般与词库分类处理策略的数值一致
Force Tags        Add_App_Censor_Words
Default Tags      censor
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeAnchorRankLib.py
Library           ../lib/YouMeRequestLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
添加自定义敏感词库
    [Documentation]    {
    ...    \ \ "Words": [ {
    ...    "Word" : "XX",
    ...    "Category" : 109,
    ...    "Level": 0
    ...    }
    ...    ]
    ...    }
    [Tags]    smoke
    log    Add_App_Censor_Words
    ${Category}    Convert To Integer    109
    ${Level}    Convert To Integer    0
    ${Words}    Create Dictionary    Word=hrewqa    Category=${Category}    Level=${Level}
    ${Words1}    Create List    ${Words}
    ${data}    Create Dictionary    Words=${Words1}
    ${res1}    Post Data    ${URL}    v1/im/add_app_censor_words    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0
    ${value}    Get From Dictionary    ${res1}    Words
    ${result}    Get From List    ${value}    0
    Dictionary Should Contain Item    ${result}    Word    hrewqa

重复添加同样敏感词
    log    Add_App_Censor_Words
    ${Category}    Convert To Integer    109
    ${Level}    Convert To Integer    0
    ${Words}    Create Dictionary    Word=hrewqa    Category=${Category}    Level=${Level}
    ${Words1}    Create List    ${Words}
    ${data}    Create Dictionary    Words=${Words1}
    ${res1}    Post Data    ${URL}    v1/im/add_app_censor_words    ${data}
    Add Censor Words    hrewqa

添加空的敏感词
    log    Add_App_Censor_Words
    ${Category}    Convert To Integer    109
    ${Level}    Convert To Integer    0
    ${Words}    Create Dictionary    Word=    Category=${Category}    Level=${Level}
    ${Words1}    Create List    ${Words}
    ${data}    Create Dictionary    Words=${Words1}
    ${res1}    Post Data    ${URL}    v1/im/add_app_censor_words    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

添加敏感词删除敏感词再添加敏感词
    ${Category}    Convert To Integer    109
    ${Level}    Convert To Integer    0
    ${Words}    Create Dictionary    Word=hrewqa    Category=${Category}    Level=${Level}
    ${Words1}    Create List    ${Words}
    ${data}    Create Dictionary    Words=${Words1}
    ${res1}    Post Data    ${URL}    v1/im/add_app_censor_words    ${data}
    Delete Censor Words    hrewqa
    Add Censor Words    hrewqa

*** Keywords ***
Delete Censor Words
    [Arguments]    ${Word}
    ${ID}    Convert To Integer    109
    ${word}    Create Dictionary    Word=kuygtfgg    ID=${ID}
    ${Words}    Create List    ${word}
    ${data}    Create Dictionary    Words=${Words}
    ${res1}    Post Data    ${URL}    v1/im/del_app_censor_words    ${data}

Add Censor Words
    [Arguments]    ${Word}
    log    Add_App_Censor_Words
    ${Category}    Convert To Integer    109
    ${Level}    Convert To Integer    0
    ${Words}    Create Dictionary    Word=hrewqa    Category=${Category}    Level=${Level}
    ${Words1}    Create List    ${Words}
    ${data}    Create Dictionary    Words=${Words1}
    ${res1}    Post Data    ${URL}    v1/im/add_app_censor_words    ${data}
