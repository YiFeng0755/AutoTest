*** Settings ***
Documentation     查询指定频道的主播用户在其排班内的上麦时长、接收礼物积分以及相关的进出频道、开关麦克风等信息
...
...
...               body为json格式，各个字段解释如下:
...
...               "Date"：查询日期，格式为YYYYMMDD，字符串
...
...               "ChannelID"：主播频道ID，字符串
...
...               "AnchorID"：主播用户ID，字符串
...
...               "NeedActionDetail"：是否需要返回操作详情信息（指主播进出频道和开关麦克风的时间信息），1是需要返回，其他值不返回，整数
Force Tags        query_anchor_monitor
Default Tags      monitor
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeRequestLib.py
Library           ../lib/YouMeAnchorRankLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
查询主播监控信息
    [Documentation]    query_anchor_monitor
    ...
    ...    参数样例
    ...    {"Date": "20170725", "ChannelID": "24180004", "AnchorID": "pro", "NeedActionDetail": 1}
    [Tags]    Anchor    User    smoke
    [Timeout]    10 seconds
    Log    query_anchor_monitor
    ${NeedActionDetail}    Convert To Number    1
    ${data}    Create Dictionary    Date=20180503    ChannelID=24180004    AnchorID=pro    NeedActionDetail=${NeedActionDetail}
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_monitor    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0
    Dictionary should contain Key    ${res1}    ActionDetail
    Dictionary should contain Key    ${res1}    MicDuration

date为空
    Log    query_anchor_monitor
    ${flag}    Convert To Number    1
    ${data}    Create Dictionary    Date=    ChannelID=24180004    AnchorID=pro    NeedActionDetail=${flag}
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_monitor    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70013

ChannelID为空
    Log    query_anchor_monitor
    ${flag}    Convert To Number    1
    ${data}    Create Dictionary    Date=20180412    ChannelID=    AnchorID=pro    NeedActionDetail=${flag}
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_monitor    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

AnchorID为空
    Log    query_anchor_monitor
    ${NeedActionDetail}    Convert To Number    1
    ${data}    Create Dictionary    Date=20180503    ChannelID=24180004    AnchorID=    NeedActionDetail=${NeedActionDetail}
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_monitor    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0
    Dictionary should contain Key    ${res1}    ActionDetail
    Dictionary should contain Key    ${res1}    MicDuration

NeedActionDetail为空
    Log    query_anchor_monitor
    ${AnchorID}    Convert To Bytes    123abc#$%
    ${data}    Create Dictionary    Date=20180503    ChannelID=24180004    AnchorID=${AnchorID}    NeedActionDetail=
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_monitor    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

body为空
    Log    query_anchor_monitor
    ${data}    Create Dictionary
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_monitor    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70013
