*** Settings ***
Documentation     查询主播排班信息
...               参数样例：
...
...               {"ChannelID": "24180004", "Date":"20170726", "AnchorID": "youmepro"}
...
...               "ChannelID"：用户所在频道ID，字符串，必填参数
...               "Date"： \ \ \ \ \ 日期，字符串，格式为YYYYMMDD，可选参数。当未指定时，则查询当天日期的排班信息（注：查询时隐含只查询出排班还未过期的排班信息，即排班开始时间大于查询时间，或者排班结束时间大于查询时间）
...               "AnchorID"： 主播用户ID，字符串
Force Tags        query_anchor_sche
Default Tags      sche
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeRequestLib.py
Library           ../lib/YouMeAnchorRankLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
查询主播用户排班信息
    [Tags]    smoke
    Log    "query_anchor_sche"
    ${Date}    Get Now Date
    ${data}    Create Dictionary    ChannelID=2011234    Date=${Date}    AnchorID=user1
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

ChannelID为空
    Log    "query_anchor_sche"
    ${Date}    Get Now Date
    ${data}    Create Dictionary    ChannelID=    Date=${Date}    AnchorID=user1
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70003

ChannelID长度为600
    Log    "query_anchor_sche"
    ${Date}    Get Now Date
    ${data}    Create Dictionary    ChannelID=123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890    Date=${Date}    AnchorID=user1
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK

Date为空
    Log    "query_anchor_sche"
    ${data}    Create Dictionary    ChannelID=2011234    Date=    AnchorID=user1
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK

Date长度值超过日期长度
    Log    "query_anchor_sche"
    ${data}    Create Dictionary    ChannelID=2011234    date=201805042010    AnchorID=user1
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK

Date格式非法
    Log    "query_anchor_sche"
    ${data}    Create Dictionary    ChannelID=2011234    date=2018-05-04    AnchorID=user1
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK

AnchorID为空
    Log    "query_anchor_sche"
    ${Date}    Get Now Date
    ${data}    Create Dictionary    ChannelID=2011234    Date=${Date}    AnchorID=
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK

AnchorID为600字符
    Log    "query_anchor_sche"
    ${Date}    Get Now Date
    ${AnchorID}    Convert To Integer    123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890123456763456789087651234567890
    ${data}    Create Dictionary    ChannelID=2011234    Date=${Date}    AnchorID=${AnchorID}
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

body为空
    Log    "query_anchor_sche"
    ${data}    Create Dictionary
    ${res1}    Post Data    ${URL}    v1/im/query_anchor_sche    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70003
