*** Settings ***
Documentation     body
...
...               body为json格式，各个字段解释如下：
...
...               " MsgSeq" 消息序列号，数字组成的字符串
...
...               "ChatType" 聊天类型，1 私聊 2 频道聊天
...
...               "SendID" \ 发送用户ID
...
...               "RecvID" \ 接收用户ID
...
...               "Content" \ \ \ \ \ \ \ \ \ \ \ \ \ \ 发送消息内容，字符串
...
...               body实例
...
...               {
...               "MsgSeq": "99807732",
...               "ChatType": 2,
...               "SendID": "abc",
...               "RecvID" : "chat_qzone",
...               "Content" : "这是测试"
...               }
Force Tags        Query_Im_Send_Msg
Default Tags      msg
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeAnchorRankLib.py
Library           ../lib/YouMeRequestLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
请求发送消息
    [Documentation]    接口名称 \ query_im_send_msg
    ...
    ...    body
    ...
    ...    {
    ...    "MsgSeq": "99807732",
    ...    "ChatType": 2,
    ...    "SendID": "abc",
    ...    "RecvID" : "chat_qzone",
    ...    "Content" : "这是测试"
    ...    }
    [Tags]    smoke
    log    Query_Im_Send_Msg
    ${MsgSeq}    Convert To Integer    99807732
    ${ChatType}    Convert To Integer    1
    ${data}    Create Dictionary    MsgSeq=${MsgSeq}    ChatType=${ChatType}    SendID=user000    RecvID=user111    Content=assoiujh
    ${res1}    Post Data    ${URL}    v1/im/query_im_send_msg    ${data}
    Dictionary Should Contain Item    ${res1}    ActionStatus    OK
    Dictionary Should Contain Item    ${res1}    ErrorCode    0

MsgSeq为空
    log    Query_Im_Send_Msg
    ${MsgSeq}    Convert To Integer    99807732
    ${ChatType}    Convert To Integer    1
    ${data}    Create Dictionary    MsgSeq=    ChatType=${ChatType}    SendID=user000    RecvID=user111    Content=assoiujh
    ${res1}    Post Data    ${URL}    v1/im/query_im_send_msg    ${data}
    Dictionary Should Contain Item    ${res1}    ActionStatus    OK
    Dictionary Should Contain Item    ${res1}    ErrorCode    0

ChatType为空
    log    Query_Im_Send_Msg
    ${MsgSeq}    Convert To Integer    99807732
    ${ChatType}    Convert To Integer    1
    ${data}    Create Dictionary    MsgSeq=${MsgSeq}    ChatType=    SendID=user000    RecvID=user111    Content=assoiujh
    ${res1}    Post Data    ${URL}    v1/im/query_im_send_msg    ${data}
    Dictionary Should Contain Item    ${res1}    ActionStatus    FAIL
    Dictionary Should Contain Item    ${res1}    ErrorCode    70001

SendID为空
    log    Query_Im_Send_Msg
    ${MsgSeq}    Convert To Integer    99807732
    ${ChatType}    Convert To Integer    1
    ${data}    Create Dictionary    MsgSeq=${MsgSeq}    ChatType=${ChatType}    SendID=    RecvID=user111    Content=assoiujh
    ${res1}    Post Data    ${URL}    v1/im/query_im_send_msg    ${data}
    Dictionary Should Contain Item    ${res1}    ActionStatus    FAIL
    Dictionary Should Contain Item    ${res1}    ErrorCode    70011

RecvID为空
    log    Query_Im_Send_Msg
    ${MsgSeq}    Convert To Integer    99807732
    ${ChatType}    Convert To Integer    1
    ${data}    Create Dictionary    MsgSeq=${MsgSeq}    ChatType=${ChatType}    SendID=user000    RecvID=    Content=assoiujh
    ${res1}    Post Data    ${URL}    v1/im/query_im_send_msg    ${data}
    Dictionary Should Contain Item    ${res1}    ActionStatus    FAIL
    Dictionary Should Contain Item    ${res1}    ErrorCode    70012

SendID和RecvID保持一致
    log    Query_Im_Send_Msg
    ${MsgSeq}    Convert To Integer    99807732
    ${ChatType}    Convert To Integer    1
    ${data}    Create Dictionary    MsgSeq=${MsgSeq}    ChatType=${ChatType}    SendID=user000    RecvID=user000
    ${res1}    Post Data    ${URL}    v1/im/query_im_send_msg    ${data}
    Dictionary Should Contain Item    ${res1}    ActionStatus    FAIL
    Dictionary Should Contain Item    ${res1}    ErrorCode    70040
    Dictionary Should Contain Item    ${res1}    ErrorInfo    msg content empty
