*** Settings ***
Documentation     根据公告ID、公告类型、公告循环类型、公告状态或公告启用状态来查询已添加的公告任务
...
...               body为json格式，各个字段解释如下：
...
...               "NoticeID" \ \ \ \ \ \ ： \ 公告ID，整数
...
...               "NoticeType" \ \ ： \ 公告类型，1为跑马灯公告，2为聊天框公告，3为置顶公告，整数
...
...               "LoopType" \ \ \ \ ： \ 公告循环类型，1为一次性公告，2为周期性公告，整数
...
...               "NoticeStatus" \ ： \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
...
...               "EnableStatus" \ ： \ 公告启用状态，1为停用，2为启用，整数
Force Tags        Query Notice
Default Tags      notice
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeAnchorRankLib.py
Library           ../lib/YouMeRequestLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
查询公告
    [Tags]    smoke
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    10
    ${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

NoticeID为空
    log    “query_notice”
    #${NoticeID}    Convert To Bytes    @#$%^
    ${NoticeType}    Convert To Integer    10
    ${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

NoticeID超过300字符
    log    “query_notice”
    #${NoticeID}    Convert To Integer    -100
    ${NoticeType}    Convert To Integer    10
    ${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

NoticeType为跑马灯公告
    [Documentation]    "NoticeType" \ \ 公告类型，1为跑马灯公告，2为聊天框公告，3为置顶公告，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

NoticeType为聊天框公告
    [Documentation]    "NoticeType" \ 公告类型，1为跑马灯公告，2为聊天框公告，3为置顶公告，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    2
    ${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

NoticeType为置顶公告
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    3
    ${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

LoopType为空
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    #${LoopType}    Convert To Integer    5
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

LoopType为一次性公告
    [Documentation]    "LoopType" \ 公告循环类型，1为一次性公告，2为周期性公告，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    1
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

LoopType为周期性公告
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

LoopType超过300字符
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    -100
    ${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

NoticeStatus为空
    [Documentation]    "NoticeStatus" \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Bytes    2
    #${NoticeStatus}    Convert To Integer    5
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

NoticeStatus为等待发送
    [Documentation]    "NoticeStatus" \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    1
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

NoticeStatus为正在发送
    [Documentation]    "NoticeStatus" \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    2
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

NoticeStatus为发送完成
    [Documentation]    "NoticeStatus" \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    3
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

NoticeStatus超过300个字符
    [Documentation]    "NoticeStatus" \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    #${NoticeStatus}    Convert To Integer    3
    ${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

EnableStatus为空
    [Documentation]    "NoticeStatus" \ 公告状态，1为等待发送，2为正在发送，3为发送完成，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    1
    #${EnableStatus}    Convert To Integer    5
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

EnableStatus为停用状态
    [Documentation]    "EnableStatus" \ 公告启用状态，1为停用，2为启用，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    1
    ${EnableStatus}    Convert To Integer    1
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

EnableStatus为启用状态
    [Documentation]    "EnableStatus" \ 公告启用状态，1为停用，2为启用，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    1
    ${EnableStatus}    Convert To Integer    2
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=${EnableStatus}
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

EnableStatus超过300个字符
    [Documentation]    "EnableStatus" \ 公告启用状态，1为停用，2为启用，整数
    log    “query_notice”
    ${NoticeID}    Convert To Integer    100
    ${NoticeType}    Convert To Integer    1
    ${LoopType}    Convert To Integer    2
    ${NoticeStatus}    Convert To Integer    1
    #${EnableStatus}    Convert To Bytes    @#$%^
    ${data}    Create Dictionary    NoticeID=${NoticeID}    NoticeType=${NoticeType}    LoopType=${LoopType}    NoticeStatus=${NoticeStatus}    EnableStatus=123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

body为空
    log    “query_notice”
    #${NoticeID}    Convert To Integer    100
    #${NoticeType}    Convert To Integer    1
    #${LoopType}    Convert To Integer    2
    #${NoticeStatus}    Convert To Integer    1
    #${EnableStatus}    Convert To Bytes    123abc@#$%^
    ${data}    Create Dictionary
    ${res1}    Post Data    ${URL}    v1/im/query_notice    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70023
