*** Settings ***
Documentation     根据游戏ID和频道ID，查询该频道内的所有用户ID
...
...               body为json格式，各个字段解释如下：
...
...               " AppID" \ \ \ \ \ \ : \ \ \ 游戏ID，整数
...               " ChannelID" \ \ : \ \ \ 频道ID，app内唯一，字符串
Force Tags        Get Talk User List On A Channel
Default Tags      talk
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeAnchorRankLib.py
Library           ../lib/YouMeRequestLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
获取Talk某频道用户列表
    [Documentation]    {
    ...    " AppID": 1000,
    ...    "ChannelID":"1234"
    ...    }
    [Tags]    smoke
    Log    get_talk_user_list_on_a_channel
    ${AppID}    Convert To Integer    345
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=channel123
    ${res1}    Post Data    ${URL}    v1/im/get_talk_user_list_on_a_channel    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

AppID为空
    Log    get_talk_user_list_on_a_channel
    ${data}    Create Dictionary    AppID=    ChannelID=abc
    ${res1}    Post Data    ${URL}    v1/im/get_talk_user_list_on_a_channel    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

AppID超过300字符
    Log    get_talk_user_list_on_a_channel
    ${AppID}    Convert To Integer    12345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=abc
    ${res1}    Post Data    ${URL}    v1/im/get_talk_user_list_on_a_channel    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

ChannelID为空
    Log    get_talk_user_list_on_a_channel
    ${AppID}    Convert To Integer    345
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=
    ${res1}    Post Data    ${URL}    v1/im/get_talk_user_list_on_a_channel    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

ChannelID超过300字符
    Log    get_talk_user_list_on_a_channel
    ${AppID}    Convert To Integer    345
    ${ChannelID}    Convert To Integer    12345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321123456789009876543211234567890098765432112345678900987654321
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=${ChannelID}
    ${res1}    Post Data    ${URL}    v1/im/get_talk_user_list_on_a_channel    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

body为空
    Log    get_talk_user_list_on_a_channel
    #${AppID}    Convert To Integer    345
    #${ChannelID}    Convert To Bytes    123abc%^$
    ${data}    Create Dictionary
    ${res1}    Post Data    ${URL}    v1/im/get_talk_user_list_on_a_channel    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70041

*** Keywords ***
Join Room
    [Arguments]    ${userID}    ${ChannelID}
    ${data}    Create Dictionary    UserID=${UserID}    ChannelID=${ChannelID}
    ${res1}    Post Data    ${URL}    v1/im/query_im_enter_channel    ${data}
