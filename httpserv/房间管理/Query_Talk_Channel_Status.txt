*** Settings ***
Documentation     body为json格式，各个字段解释如下：
...
...               "AppID": \ 游戏ID，整数，必选字段
...
...               "ChannelID": 频道ID，字符串，必选字段
...
...
...               {
...               "AppID": 1000,
...               "ChannelID": "ch345"
...               }
Force Tags        Query_Talk_Channel_Status
Default Tags      Channel
Library           RequestsLibrary
Library           Collections
Library           ../lib/YouMeAnchorRankLib.py
Library           ../lib/YouMeRequestLib.py

*** Variables ***
${SECRET}         uQAuo9xbYOevRl7oyTm0kR60WMoLDmIzgucehu8lkV0Y2ZKOEP84Y5cWyliGlns0nJK2kgDDGEsCsi/SUWnn0jKQ0REteItDMn/5rihp+Dd8I0V1FMcMeXTSPWDcV+lTiF9so2bpIpLsMlUdHGUVkUMIdUv6vgmtZflkfALM6AMBAAE=    # 用于sha1加密的 秘钥
${APPKEY}         YOUME3C8DDD417211056AAEC1A518FBA43F34577EC958    # 应用标识
${URL}            http://106.75.14.78:18080/

*** Test Cases ***
查询指定游戏的Talk频道状态
    [Tags]    smoke
    log    Query_Talk_Channel_Status
    ${AppID}    Convert To Integer    345
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=ch345
    ${res1}    Post Data    ${URL}    v1/im/query_talk_channel_status    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0
    Dictionary should contain Item    ${res1}    ChannelID    ch345
    Dictionary should contain Item    ${res1}    Status    1
    Dictionary should contain Item    ${res1}    AppID    345

ChanneID为空
    [Documentation]    响应
    ...
    ...    其中状态Status的取值含义是1（不存在）、2（空闲，频道人数是0）、3（会议中，频道人数大于0）
    log    Query_Talk_Channel_Status
    ${AppID}    Convert To Integer    345
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=
    ${res1}    Post Data    ${URL}    v1/im/query_talk_channel_status    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

AppID为空
    log    Query_Talk_Channel_Status
    #${AppID}    Convert To Integer    345
    ${data}    Create Dictionary    AppID=    ChannelID=ch345
    ${res1}    Post Data    ${URL}    v1/im/query_talk_channel_status    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70001

body为空
    log    Query_Talk_Channel_Status
    #${AppID}    Convert To Integer    345
    ${data}    Create Dictionary
    ${res1}    Post Data    ${URL}    v1/im/query_talk_channel_status    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    FAIL
    Dictionary should contain Item    ${res1}    ErrorCode    70041

查看有用户的频道状态
    log    Query_Talk_Channel_Status
    Join Channel    user123    channel123
    ${AppID}    Convert To Integer    345
    ${data}    Create Dictionary    AppID=${AppID}    ChannelID=channel123
    ${res1}    Post Data    ${URL}    v1/im/query_talk_channel_status    ${data}
    Dictionary should contain Item    ${res1}    ActionStatus    OK
    Dictionary should contain Item    ${res1}    ErrorCode    0

*** Keywords ***
Join Channel
    [Arguments]    ${UserID}    ${ChannelID}
    ${data}    Create Dictionary    UserID=${UserID}    ChannelID=${ChannelID}
    ${res1}    Post Data    ${URL}    v1/im/query_im_enter_channel    ${data}
    [Teardown]
